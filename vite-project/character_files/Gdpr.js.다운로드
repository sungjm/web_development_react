DT.onReady(async()=>{try{if(DT.afterLcp)await DT.afterLcp?.();await DT.loadScriptsOnce('https://www.googletagservices.com/tag/js/gpt.js')}catch(error){DT.log('error','Failed to load Google GPT js',error);return}
googletag.cmd.push(function(){googletag.pubads().enableSingleRequest();googletag.enableServices()});const gdprAcceptButton=document.querySelector('.js-gdpr-accept');const gdprRefuseButton=document.querySelector('.js-gdpr-refuse');const afterUserAction=async()=>{await DT.Scheduler.yieldToMain();const gdprElement=document.querySelector('.js-gdpr');const gdprContainerElement=document.querySelector('.js-gdpr-container');gdprElement.textContent='Your selection has been successfully saved.';gdprContainerElement.setAttribute('data-selected','');DT.setCookie('sgdpr',1,365,'/','.dreamstime.com')};gdprAcceptButton?.addEventListener('click',async()=>{await DT.Scheduler.yieldToMain();gtag('consent','update',{'ad_user_data':'granted','ad_personalization':'granted','ad_storage':'granted','analytics_storage':'granted','wait_for_update':500,'region':['AT','BE','BG','CY','CZ','DE','DK','EE','ES','FI','FR','GR','HR','HU','IE','IT','LT','LU','LV','MT','NL','PL','PT','RO','SE','SI','SK','GB'],});if(!window.googletag||!googletag.apiReady){return}
await DT.Scheduler.yieldToMain();googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({nonPersonalizedAds:!1});try{googletag.setConfig({privacyTreatments:{treatments:[]}})}catch(error){DT.log('error','Failed to set Google GPT config',error)}});await afterUserAction()});gdprRefuseButton?.addEventListener('click',async()=>{await DT.Scheduler.yieldToMain();gtag('consent','update',{'ad_user_data':'denied','ad_personalization':'denied','ad_storage':'denied','analytics_storage':'denied','wait_for_update':500,'region':['AT','BE','BG','CY','CZ','DE','DK','EE','ES','FI','FR','GR','HR','HU','IE','IT','LT','LU','LV','MT','NL','PL','PT','RO','SE','SI','SK','GB'],});if(!window.googletag||!googletag.apiReady){return}
await DT.Scheduler.yieldToMain();googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0});try{googletag.setConfig({privacyTreatments:{treatments:['disablePersonalization']},})}catch(error){DT.log('error','Failed to set Google GPT config',error)}});await afterUserAction()})})